<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 480">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="480" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">Breakfast-Poll - Order Workflow</text>

  <!-- Phase 1: Poll -->
  <rect x="30" y="55" width="200" height="180" rx="8" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" filter="url(#shadow)"/>
  <rect x="30" y="55" width="200" height="30" rx="8" fill="#2196f3"/>
  <rect x="30" y="75" width="200" height="10" fill="#2196f3"/>
  <text x="130" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">1. Poll</text>

  <text x="50" y="110" font-family="Arial, sans-serif" font-size="10" fill="#333">Each participant:</text>
  <circle cx="55" cy="130" r="3" fill="#2196f3"/>
  <text x="65" y="134" font-family="Arial, sans-serif" font-size="10" fill="#555">Selects their name</text>
  <circle cx="55" cy="150" r="3" fill="#2196f3"/>
  <text x="65" y="154" font-family="Arial, sans-serif" font-size="10" fill="#555">Chooses drink</text>
  <circle cx="55" cy="170" r="3" fill="#2196f3"/>
  <text x="65" y="174" font-family="Arial, sans-serif" font-size="10" fill="#555">Chooses food</text>
  <circle cx="55" cy="190" r="3" fill="#2196f3"/>
  <text x="65" y="194" font-family="Arial, sans-serif" font-size="10" fill="#555">Saves to order.csv</text>

  <text x="130" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Multiple users can vote</text>

  <!-- Arrow 1 to 2 -->
  <line x1="230" y1="145" x2="268" y2="145" stroke="#555" stroke-width="2"/>
  <polygon points="268,140 278,145 268,150" fill="#555"/>

  <!-- Phase 2: Current -->
  <rect x="280" y="55" width="200" height="180" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="2" filter="url(#shadow)"/>
  <rect x="280" y="55" width="200" height="30" rx="8" fill="#ff9800"/>
  <rect x="280" y="75" width="200" height="10" fill="#ff9800"/>
  <text x="380" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">2. Current Order</text>

  <text x="300" y="110" font-family="Arial, sans-serif" font-size="10" fill="#333">Order manager:</text>
  <circle cx="305" cy="130" r="3" fill="#ff9800"/>
  <text x="315" y="134" font-family="Arial, sans-serif" font-size="10" fill="#555">Reviews all orders</text>
  <circle cx="305" cy="150" r="3" fill="#ff9800"/>
  <text x="315" y="154" font-family="Arial, sans-serif" font-size="10" fill="#555">Edits if needed</text>
  <circle cx="305" cy="170" r="3" fill="#ff9800"/>
  <text x="315" y="174" font-family="Arial, sans-serif" font-size="10" fill="#555">Gets ticket breakdown</text>
  <circle cx="305" cy="190" r="3" fill="#ff9800"/>
  <text x="315" y="194" font-family="Arial, sans-serif" font-size="10" fill="#555">Selects who pays</text>

  <text x="380" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e65100">Calculates combos</text>

  <!-- Arrow 2 to 3 -->
  <line x1="480" y1="145" x2="518" y2="145" stroke="#555" stroke-width="2"/>
  <polygon points="518,140 528,145 518,150" fill="#555"/>

  <!-- Phase 3: Close Poll -->
  <rect x="530" y="55" width="200" height="180" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" filter="url(#shadow)"/>
  <rect x="530" y="55" width="200" height="30" rx="8" fill="#4caf50"/>
  <rect x="530" y="75" width="200" height="10" fill="#4caf50"/>
  <text x="630" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">3. Close Poll</text>

  <text x="550" y="110" font-family="Arial, sans-serif" font-size="10" fill="#333">System actions:</text>
  <circle cx="555" cy="130" r="3" fill="#4caf50"/>
  <text x="565" y="134" font-family="Arial, sans-serif" font-size="10" fill="#555">Updates debts</text>
  <circle cx="555" cy="150" r="3" fill="#4caf50"/>
  <text x="565" y="154" font-family="Arial, sans-serif" font-size="10" fill="#555">Saves to history</text>
  <circle cx="555" cy="170" r="3" fill="#4caf50"/>
  <text x="565" y="174" font-family="Arial, sans-serif" font-size="10" fill="#555">Clears current order</text>
  <circle cx="555" cy="190" r="3" fill="#4caf50"/>
  <text x="565" y="194" font-family="Arial, sans-serif" font-size="10" fill="#555">Records who paid</text>

  <text x="630" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2e7d32">Payer gets credit</text>

  <!-- Arrow 3 to 4 -->
  <line x1="730" y1="145" x2="768" y2="145" stroke="#555" stroke-width="2"/>
  <polygon points="768,140 778,145 768,150" fill="#555"/>

  <!-- Phase 4: Debts -->
  <rect x="780" y="55" width="100" height="180" rx="8" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="780" y="55" width="100" height="30" rx="8" fill="#9c27b0"/>
  <rect x="780" y="75" width="100" height="10" fill="#9c27b0"/>
  <text x="830" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">4. Track</text>

  <circle cx="800" cy="115" r="3" fill="#9c27b0"/>
  <text x="810" y="119" font-family="Arial, sans-serif" font-size="9" fill="#555">Debts</text>
  <text x="810" y="130" font-family="Arial, sans-serif" font-size="9" fill="#555">view</text>

  <circle cx="800" cy="155" r="3" fill="#9c27b0"/>
  <text x="810" y="159" font-family="Arial, sans-serif" font-size="9" fill="#555">History</text>
  <text x="810" y="170" font-family="Arial, sans-serif" font-size="9" fill="#555">view</text>

  <circle cx="800" cy="195" r="3" fill="#9c27b0"/>
  <text x="810" y="199" font-family="Arial, sans-serif" font-size="9" fill="#555">Morosos</text>
  <text x="810" y="210" font-family="Arial, sans-serif" font-size="9" fill="#555">view</text>

  <!-- Ticket Breakdown Section -->
  <rect x="30" y="270" width="450" height="190" rx="8" fill="#fff" stroke="#ff9800" stroke-width="2" filter="url(#shadow)"/>
  <text x="255" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#e65100">Ticket Generation (Combo Logic)</text>

  <!-- Bar Ticket -->
  <rect x="50" y="315" width="120" height="70" rx="5" fill="#ffecb3" stroke="#ffc107" stroke-width="1"/>
  <text x="110" y="338" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#ff8f00">Bar Ticket</text>
  <text x="110" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#555">What to order</text>
  <text x="110" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#555">at the cafeteria</text>

  <!-- Machine Ticket -->
  <rect x="190" y="315" width="120" height="70" rx="5" fill="#c8e6c9" stroke="#66bb6a" stroke-width="1"/>
  <text x="250" y="338" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#388e3c">Machine Ticket</text>
  <text x="250" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#555">Items for the</text>
  <text x="250" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#555">payment machine</text>

  <!-- Debts Ticket -->
  <rect x="330" y="315" width="120" height="70" rx="5" fill="#bbdefb" stroke="#42a5f5" stroke-width="1"/>
  <text x="390" y="338" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#1976d2">Debts Ticket</text>
  <text x="390" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#555">Cost per person</text>
  <text x="390" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#555">with combos applied</text>

  <!-- Combo explanation -->
  <text x="50" y="410" font-family="Arial, sans-serif" font-size="10" fill="#666">Combo pricing: Coffee + Food = Breakfast deal</text>
  <text x="50" y="425" font-family="Arial, sans-serif" font-size="9" fill="#888">Barrita aceite/Napolitana + Café = 1.85€ | Barrita tomate/Croissant + Café = 2.50€</text>
  <text x="50" y="440" font-family="Arial, sans-serif" font-size="9" fill="#888">System optimizes to minimize total cost for the group</text>

  <!-- Morosos Section -->
  <rect x="510" y="270" width="370" height="190" rx="8" fill="#fff" stroke="#e91e63" stroke-width="2" filter="url(#shadow)"/>
  <text x="695" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#c2185b">Morosos View (Hall of Shame)</text>

  <!-- Debtor card mockup -->
  <rect x="530" y="315" width="150" height="130" rx="5" fill="#fce4ec" stroke="#e91e63" stroke-width="1"/>
  <rect x="545" y="330" width="60" height="60" rx="3" fill="#f8bbd9" stroke="#e91e63" stroke-width="1"/>
  <text x="575" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">AI Image</text>
  <text x="545" y="410" font-family="Arial, sans-serif" font-size="9" fill="#555">Nickname</text>
  <text x="545" y="425" font-family="Arial, sans-serif" font-size="8" fill="#888">Backstory...</text>

  <!-- Audio icon -->
  <rect x="615" y="330" width="50" height="25" rx="3" fill="#f48fb1"/>
  <text x="640" y="347" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">Audio</text>

  <!-- Integration note -->
  <text x="700" y="330" font-family="Arial, sans-serif" font-size="10" fill="#333">From pix2pix:</text>
  <circle cx="710" cy="350" r="3" fill="#e91e63"/>
  <text x="720" y="354" font-family="Arial, sans-serif" font-size="9" fill="#555">AI-generated image</text>
  <circle cx="710" cy="370" r="3" fill="#e91e63"/>
  <text x="720" y="374" font-family="Arial, sans-serif" font-size="9" fill="#555">Fictional backstory</text>
  <circle cx="710" cy="390" r="3" fill="#e91e63"/>
  <text x="720" y="394" font-family="Arial, sans-serif" font-size="9" fill="#555">Evil nickname</text>
  <circle cx="710" cy="410" r="3" fill="#e91e63"/>
  <text x="720" y="414" font-family="Arial, sans-serif" font-size="9" fill="#555">TTS narration</text>

  <text x="700" y="445" font-family="Arial, sans-serif" font-size="9" fill="#888">Ranked by debt amount</text>
</svg>
